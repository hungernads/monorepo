name = "hungernads"
main = "src/index.ts"
compatibility_date = "2024-12-30"
compatibility_flags = ["nodejs_compat"]

# ─── D1 Database (Mainnet) ──────────────────────────────────────
[[d1_databases]]
binding = "DB"
database_name = "hungernads-mainnet"
database_id = "979c4fff-519f-4285-9e1c-34cbff53f398"
migrations_dir = "src/db/migrations"

# ─── Durable Objects ────────────────────────────────────────────
[durable_objects]
bindings = [
  { name = "AGENT_DO", class_name = "AgentDO" },
  { name = "ARENA_DO", class_name = "ArenaDO" },
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["AgentDO", "ArenaDO"]

# ─── KV Namespaces (Mainnet) ────────────────────────────────────
[[kv_namespaces]]
binding = "CACHE"
id = "3192200538f2415dac3e7ab3b5916030"

# ─── Environment Variables (non-secret) ─────────────────────────
[vars]
ENVIRONMENT = "production"
PYTH_ENDPOINT = "https://hermes.pyth.network"

# ─── Secrets (set via `wrangler secret put`) ──────────────────────
# MONAD_RPC_URL              = Monad mainnet RPC endpoint
# MONAD_WS_URL               = Monad mainnet WSS endpoint (for curve streaming)
# PRIVATE_KEY                = Worker oracle wallet private key (0x-prefixed)
# ARENA_CONTRACT_ADDRESS     = Deployed HungernadsArena address
# BETTING_CONTRACT_ADDRESS   = Deployed HungernadsBetting address
# GROQ_API_KEY               = Groq LLM API key
# GOOGLE_API_KEY             = Google AI API key
# OPENROUTER_API_KEY         = OpenRouter API key
# NADFUN_TOKEN_ADDRESS       = $HNADS token address on nad.fun (set after creation)
# MOLTBOOK_API_KEY           = Moltbook API key for /m/hungernads submolt posting

# ─── Dev settings ───────────────────────────────────────────────
[dev]
port = 8787
